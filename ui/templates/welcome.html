{% extends "base.html" %}

{% block content %}
<!-- åˆå›èµ·å‹•ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ -->
<div class="welcome-container">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼ -->
            <div class="welcome-header text-center mb-5">
                <div class="welcome-logo">ğŸ¤–</div>
                <h1 class="welcome-title">EmotionMemCore ã¸ã‚ˆã†ã“ãï¼</h1>
                <p class="welcome-subtitle">æ„Ÿæƒ…ä»˜ãè¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ  - åˆå¿ƒè€…ã§ã‚‚3åˆ†ã§ä½¿ãˆã¾ã™</p>
            </div>
            
            <!-- ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
            <div class="step-indicator mb-4">
                <div class="step active" id="step-1">
                    <div class="step-number">1</div>
                    <div class="step-label">ã‚ˆã†ã“ã</div>
                </div>
                <div class="step-line"></div>
                <div class="step" id="step-2">
                    <div class="step-number">2</div>
                    <div class="step-label">ç°¡å˜èª¬æ˜</div>
                </div>
                <div class="step-line"></div>
                <div class="step" id="step-3">
                    <div class="step-number">3</div>
                    <div class="step-label">ä½“é¨“é–‹å§‹</div>
                </div>
            </div>
            
            <!-- ã‚¹ãƒ†ãƒƒãƒ—1: ã‚ˆã†ã“ã -->
            <div class="wizard-step active" id="wizard-step-1">
                <div class="step-card">
                    <h3>ğŸ‰ åˆã‚ã¾ã—ã¦ï¼</h3>
                    <p class="step-description">
                        EmotionMemCore ã¯ <strong>AIã¨ã®ä¼šè©±ã‚’è¨˜æ†¶ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ </strong> ã§ã™ã€‚<br>
                        é›£ã—ã„è¨­å®šã¯ä¸€åˆ‡ä¸è¦ã§ã€ä»Šã™ãä½“é¨“ã§ãã¾ã™ï¼
                    </p>
                    
                    <div class="feature-grid">
                        <div class="feature-item">
                            <div class="feature-icon">ğŸ­</div>
                            <div class="feature-text">
                                <strong>æ„Ÿæƒ…ã‚‚ä¸€ç·’ã«è¨˜æ†¶</strong><br>
                                ã€Œå–œã³ã€ã€Œæ‚²ã—ã¿ã€ãªã©38ç¨®é¡ã®æ„Ÿæƒ…ã‚’è‡ªå‹•åˆ†æ
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">ğŸ”</div>
                            <div class="feature-text">
                                <strong>è‡ªç„¶ãªè¨€è‘‰ã§æ¤œç´¢</strong><br>
                                ã€Œæ¥½ã—ã‹ã£ãŸè©±ã€ã€Œæ‚²ã—ã„å‡ºæ¥äº‹ã€ã§è¨˜æ†¶ã‚’æ¤œç´¢
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">ğŸ“Š</div>
                            <div class="feature-text">
                                <strong>ç¾ã—ã„ã‚°ãƒ©ãƒ•è¡¨ç¤º</strong><br>
                                æ„Ÿæƒ…ã®å¤‰åŒ–ã‚’ç¾ã—ã„ã‚°ãƒ©ãƒ•ã§å¯è¦–åŒ–
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">ğŸ”Œ</div>
                            <div class="feature-text">
                                <strong>ç°¡å˜ã«AIã¨é€£æº</strong><br>
                                AITuberKitç­‰ã¨ã®é€£æºã‚‚ç°¡å˜è¨­å®š
                            </div>
                        </div>
                    </div>
                    
                    <div class="step-actions">
                        <button class="btn btn-primary btn-lg" onclick="nextStep()">
                            æ¬¡ã¸é€²ã‚€ <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- ã‚¹ãƒ†ãƒƒãƒ—2: ç°¡å˜èª¬æ˜ -->
            <div class="wizard-step" id="wizard-step-2">
                <div class="step-card">
                    <h3>ğŸ“‹ ä½¿ã„æ–¹ã¯ã“ã‚“ãªã«ç°¡å˜ï¼</h3>
                    <p class="step-description">
                        ãŸã£ãŸ3ã‚¹ãƒ†ãƒƒãƒ—ã§ EmotionMemCore ã‚’ä½“é¨“ã§ãã¾ã™
                    </p>
                    
                    <div class="usage-steps">
                        <div class="usage-step">
                            <div class="usage-number">1ï¸âƒ£</div>
                            <div class="usage-content">
                                <h5>ä¼šè©±ã‚’å…¥åŠ›</h5>
                                <p>ã€Œä»Šæ—¥ã¯æ¥½ã—ã‹ã£ãŸï¼ã€ã€Œãã‚Œã¯è‰¯ã‹ã£ãŸã§ã™ã­ã€ã®ã‚ˆã†ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨AIã®ä¼šè©±ã‚’å…¥åŠ›</p>
                                <div class="usage-example">
                                    <div class="message user-message">ã€Œä»Šæ—¥ã®ãŠå¤©æ°—ã¯ã¨ã¦ã‚‚ã„ã„ã§ã™ã­ï¼ã€</div>
                                    <div class="message ai-message">ã€Œæœ¬å½“ã«ã„ã„ãŠå¤©æ°—ã§ã™ã­ï¼æ•£æ­©æ—¥å’Œã§ã™ã€</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="usage-step">
                            <div class="usage-number">2ï¸âƒ£</div>
                            <div class="usage-content">
                                <h5>è‡ªå‹•ã§æ„Ÿæƒ…åˆ†æ</h5>
                                <p>ã‚·ã‚¹ãƒ†ãƒ ãŒè‡ªå‹•ã§æ„Ÿæƒ…ã‚’åˆ†æã—ã€ã€Œå–œã³ã€ã€ŒæœŸå¾…ã€ãªã©ã®ã‚¿ã‚°ã‚’ä»˜ã‘ã¦è¨˜æ†¶ã—ã¾ã™</p>
                                <div class="emotion-tags-example">
                                    <span class="emotion-tag">å–œã³</span>
                                    <span class="emotion-tag">æœŸå¾…</span>
                                    <span class="emotion-tag">å®‰å¿ƒ</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="usage-step">
                            <div class="usage-number">3ï¸âƒ£</div>
                            <div class="usage-content">
                                <h5>ã„ã¤ã§ã‚‚æ¤œç´¢</h5>
                                <p>ã€Œå¤©æ°—ã®è©±ã€ã€Œæ¥½ã—ã‹ã£ãŸè¨˜æ†¶ã€ãªã©ã€è‡ªç„¶ãªæ—¥æœ¬èªã§éå»ã®è¨˜æ†¶ã‚’æ¤œç´¢</p>
                                <div class="search-example">
                                    <input type="text" class="form-control" value="å¤©æ°—ã®è‰¯ã„æ—¥ã®è©±" readonly>
                                    <div class="search-result">âœ… 1ä»¶ã®è¨˜æ†¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step-actions">
                        <button class="btn btn-secondary" onclick="prevStep()">
                            <i class="bi bi-arrow-left"></i> æˆ»ã‚‹
                        </button>
                        <button class="btn btn-primary btn-lg" onclick="nextStep()">
                            ä½“é¨“ã—ã¦ã¿ã‚‹ <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- ã‚¹ãƒ†ãƒƒãƒ—3: ä½“é¨“é–‹å§‹ -->
            <div class="wizard-step" id="wizard-step-3">
                <div class="step-card">
                    <h3>ğŸš€ ã•ã‚ã€å§‹ã‚ã¾ã—ã‚‡ã†ï¼</h3>
                    <p class="step-description">
                        æº–å‚™å®Œäº†ã§ã™ï¼ä¸‹ã®ãƒœã‚¿ãƒ³ã§ EmotionMemCore ã‚’ä½“é¨“ã—ã¦ã¿ã¦ãã ã•ã„
                    </p>
                    
                    <div class="start-options">
                        <div class="start-option recommended">
                            <div class="option-badge">ãŠã™ã™ã‚</div>
                            <div class="option-icon">ğŸ§ª</div>
                            <h5>æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã§ä½“é¨“</h5>
                            <p>ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ã€ã¾ãšã¯æ©Ÿèƒ½ã‚’ä½“é¨“ã—ã¦ã¿ã¾ã—ã‚‡ã†</p>
                            <button class="btn btn-success btn-lg" onclick="goToTest()">
                                <i class="bi bi-play-circle"></i> æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹
                            </button>
                        </div>
                        
                        <div class="start-option">
                            <div class="option-icon">ğŸ“Š</div>
                            <h5>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’è¦‹ã‚‹</h5>
                            <p>ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®æ¦‚è¦ã‚’ç¢ºèªã—ãŸã„æ–¹ã¯ã“ã¡ã‚‰</p>
                            <button class="btn btn-primary" onclick="goToDashboard()">
                                <i class="bi bi-speedometer2"></i> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸
                            </button>
                        </div>
                        
                        <div class="start-option">
                            <div class="option-icon">ğŸ”</div>
                            <h5>è¨˜æ†¶æ¤œç´¢ã‚’è©¦ã™</h5>
                            <p>è‡ªç„¶è¨€èªã§ã®æ¤œç´¢æ©Ÿèƒ½ã‚’è©¦ã—ã¦ã¿ãŸã„æ–¹ã¯ã“ã¡ã‚‰</p>
                            <button class="btn btn-info" onclick="goToSearch()">
                                <i class="bi bi-search"></i> è¨˜æ†¶æ¤œç´¢ã¸
                            </button>
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h6>ğŸ’¡ å›°ã£ãŸã¨ãã¯...</h6>
                        <div class="help-links">
                            <a href="/settings" class="help-link">
                                <i class="bi bi-gear"></i> è¨­å®šã‚¬ã‚¤ãƒ‰
                            </a>
                            <a href="https://github.com/Nikunikuo/EmotionMemCore" target="_blank" class="help-link">
                                <i class="bi bi-github"></i> GitHub
                            </a>
                            <a href="http://localhost:8000/docs" target="_blank" class="help-link">
                                <i class="bi bi-book"></i> APIä»•æ§˜
                            </a>
                        </div>
                    </div>
                    
                    <div class="step-actions">
                        <button class="btn btn-secondary" onclick="prevStep()">
                            <i class="bi bi-arrow-left"></i> æˆ»ã‚‹
                        </button>
                        <button class="btn btn-outline-primary" onclick="skipWizard()">
                            ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒƒãƒ—
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .welcome-container {
        min-height: 100vh;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 2rem 0;
    }
    
    .welcome-header {
        color: white;
        margin-bottom: 3rem;
    }
    
    .welcome-logo {
        font-size: 5rem;
        margin-bottom: 1rem;
    }
    
    .welcome-title {
        font-size: 3rem;
        font-weight: bold;
        margin-bottom: 1rem;
    }
    
    .welcome-subtitle {
        font-size: 1.3rem;
        opacity: 0.9;
    }
    
    .step-indicator {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 3rem;
    }
    
    .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
    }
    
    .step-number {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 1.2rem;
        margin-bottom: 0.5rem;
        transition: all 0.3s ease;
    }
    
    .step.active .step-number {
        background: #4CAF50;
        transform: scale(1.1);
    }
    
    .step-label {
        color: white;
        font-size: 0.9rem;
        text-align: center;
    }
    
    .step-line {
        width: 100px;
        height: 2px;
        background: rgba(255, 255, 255, 0.3);
        margin: 0 1rem;
        margin-top: -25px;
    }
    
    .wizard-step {
        display: none;
    }
    
    .wizard-step.active {
        display: block;
        animation: fadeInUp 0.5s ease-out;
    }
    
    .step-card {
        background: white;
        border-radius: 1.5rem;
        padding: 3rem;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        text-align: center;
    }
    
    .step-card h3 {
        color: #333;
        margin-bottom: 1.5rem;
        font-size: 2rem;
    }
    
    .step-description {
        font-size: 1.1rem;
        color: #666;
        margin-bottom: 2rem;
        line-height: 1.6;
    }
    
    .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
    }
    
    .feature-item {
        display: flex;
        align-items: flex-start;
        text-align: left;
        padding: 1rem;
        border-radius: 1rem;
        background: #f8f9fa;
    }
    
    .feature-icon {
        font-size: 2rem;
        margin-right: 1rem;
        flex-shrink: 0;
    }
    
    .feature-text {
        flex: 1;
    }
    
    .usage-steps {
        margin: 2rem 0;
    }
    
    .usage-step {
        display: flex;
        align-items: flex-start;
        margin-bottom: 2rem;
        text-align: left;
    }
    
    .usage-number {
        font-size: 2rem;
        margin-right: 1.5rem;
        flex-shrink: 0;
    }
    
    .usage-content {
        flex: 1;
    }
    
    .usage-content h5 {
        margin-bottom: 0.5rem;
        color: #333;
    }
    
    .usage-example {
        margin-top: 1rem;
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 0.5rem;
    }
    
    .message {
        padding: 0.5rem 1rem;
        margin: 0.5rem 0;
        border-radius: 1rem;
    }
    
    .user-message {
        background: #007bff;
        color: white;
        margin-left: 2rem;
    }
    
    .ai-message {
        background: #28a745;
        color: white;
        margin-right: 2rem;
    }
    
    .emotion-tags-example {
        margin-top: 1rem;
    }
    
    .emotion-tag {
        display: inline-block;
        background: linear-gradient(45deg, #FF9800, #FFB74D);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
        margin: 0.25rem;
        font-size: 0.9rem;
    }
    
    .search-example {
        margin-top: 1rem;
    }
    
    .search-result {
        margin-top: 0.5rem;
        color: #28a745;
        font-weight: bold;
    }
    
    .start-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
    }
    
    .start-option {
        padding: 2rem;
        border: 2px solid #e9ecef;
        border-radius: 1rem;
        position: relative;
        transition: all 0.3s ease;
    }
    
    .start-option:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    .start-option.recommended {
        border-color: #28a745;
        background: linear-gradient(135deg, #e8f5e8, #f0f8f0);
    }
    
    .option-badge {
        position: absolute;
        top: -10px;
        right: 1rem;
        background: #28a745;
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
        font-size: 0.8rem;
        font-weight: bold;
    }
    
    .option-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }
    
    .start-option h5 {
        margin-bottom: 1rem;
        color: #333;
    }
    
    .start-option p {
        color: #666;
        margin-bottom: 1.5rem;
    }
    
    .help-section {
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 1px solid #e9ecef;
    }
    
    .help-links {
        display: flex;
        justify-content: center;
        gap: 1rem;
        flex-wrap: wrap;
    }
    
    .help-link {
        display: flex;
        align-items: center;
        padding: 0.5rem 1rem;
        background: #f8f9fa;
        color: #666;
        text-decoration: none;
        border-radius: 0.5rem;
        transition: all 0.3s ease;
    }
    
    .help-link:hover {
        background: #e9ecef;
        color: #333;
        text-decoration: none;
    }
    
    .help-link i {
        margin-right: 0.5rem;
    }
    
    .step-actions {
        margin-top: 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @media (max-width: 768px) {
        .welcome-container {
            padding: 1rem 0;
        }
        
        .step-card {
            padding: 2rem 1.5rem;
        }
        
        .welcome-title {
            font-size: 2rem;
        }
        
        .feature-grid,
        .start-options {
            grid-template-columns: 1fr;
        }
        
        .step-indicator {
            flex-direction: column;
            gap: 1rem;
        }
        
        .step-line {
            display: none;
        }
    }
</style>
{% endblock %}

{% block extra_scripts %}
<script>
    let currentStep = 1;
    const totalSteps = 3;
    
    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
    document.addEventListener('DOMContentLoaded', function() {
        // åˆå›è¨ªå•ãƒã‚§ãƒƒã‚¯
        const hasVisited = localStorage.getItem('emotionmemcore_visited');
        if (hasVisited) {
            // æ—¢ã«è¨ªå•æ¸ˆã¿ã®å ´åˆã¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
            window.location.href = '/';
            return;
        }
        
        showStep(1);
    });
    
    // ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤º
    function showStep(step) {
        // å…¨ã‚¹ãƒ†ãƒƒãƒ—ã‚’éè¡¨ç¤º
        for (let i = 1; i <= totalSteps; i++) {
            const stepElement = document.getElementById(`wizard-step-${i}`);
            const indicatorElement = document.getElementById(`step-${i}`);
            
            if (stepElement) stepElement.classList.remove('active');
            if (indicatorElement) indicatorElement.classList.remove('active');
        }
        
        // æŒ‡å®šã‚¹ãƒ†ãƒƒãƒ—ã‚’è¡¨ç¤º
        const targetStep = document.getElementById(`wizard-step-${step}`);
        const targetIndicator = document.getElementById(`step-${step}`);
        
        if (targetStep) targetStep.classList.add('active');
        if (targetIndicator) targetIndicator.classList.add('active');
        
        currentStep = step;
    }
    
    // æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
    function nextStep() {
        if (currentStep < totalSteps) {
            showStep(currentStep + 1);
        }
    }
    
    // å‰ã®ã‚¹ãƒ†ãƒƒãƒ—
    function prevStep() {
        if (currentStep > 1) {
            showStep(currentStep - 1);
        }
    }
    
    // æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã¸
    function goToTest() {
        localStorage.setItem('emotionmemcore_visited', 'true');
        window.location.href = '/test';
    }
    
    // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã¸
    function goToDashboard() {
        localStorage.setItem('emotionmemcore_visited', 'true');
        window.location.href = '/';
    }
    
    // è¨˜æ†¶æ¤œç´¢ãƒšãƒ¼ã‚¸ã¸
    function goToSearch() {
        localStorage.setItem('emotionmemcore_visited', 'true');
        window.location.href = '/search';
    }
    
    // ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒƒãƒ—
    function skipWizard() {
        localStorage.setItem('emotionmemcore_visited', 'true');
        window.location.href = '/';
    }
</script>
{% endblock %}